---
openhpc_slurm_service:
openhpc_slurm_control_host: "{{ inventory_hostname }}"
#openhpc_slurm_control_host_address:
openhpc_slurm_partitions: []
openhpc_cluster_name:
openhpc_resume_timeout: 300
openhpc_retry_delay: 10
openhpc_job_maxtime: '60-0' # quote this to avoid ansible converting some formats to seconds, which is interpreted as minutes by Slurm
openhpc_config: "{{ openhpc_extra_config | default({}) }}"
openhpc_gres_template: gres.conf.j2
openhpc_slurm_configless: "{{ 'enable_configless' in openhpc_config.get('SlurmctldParameters', []) }}"

master_slurm:
  state_save_location: /var/spool/slurm # Absolute path for Slurm controller state (`slurm.conf` parameter StateSaveLocation)
  job_comp_loc: /var/log/slurm_jobacct.log # Absolute path for Slurm job completion logfile (`slurm.conf` parameter JobCompLoc)


# Accounting
openhpc_slurm_accounting_storage_host: "{{ openhpc_slurmdbd_host }}"
openhpc_slurm_accounting_storage_port: 6819
openhpc_slurm_accounting_storage_type: accounting_storage/none
# NOTE: You only need to set these if using accounting_storage/mysql
openhpc_slurm_accounting_storage_user: slurm
#openhpc_slurm_accounting_storage_pass:

# Job accounting
openhpc_slurm_job_acct_gather_type: jobacct_gather/linux
openhpc_slurm_job_acct_gather_frequency: 30
openhpc_slurm_job_comp_loc: /var/log/slurm_jobacct.log

# slurmdbd configuration
openhpc_slurmdbd_host: "{{ openhpc_slurm_control_host }}"
openhpc_slurmdbd_port: "{{ openhpc_slurm_accounting_storage_port }}"
openhpc_slurmdbd_mysql_host: "{{ openhpc_slurm_control_host }}"
openhpc_slurmdbd_mysql_database: slurm_acct_db
#openhpc_slurmdbd_mysql_password:
openhpc_slurmdbd_mysql_username: slurm

openhpc_enable:
  control: false
  batch: false
  database: false
  runtime: false

openhpc_munge_key:
openhpc_login_only_nodes: ''

# Auto detection
openhpc_ram_multiplier: 0.95
